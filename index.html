<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Learn English App</title>
  <meta name="theme-color" content="#0078D4" />

  <!-- ğŸŒ PWA & Icons -->
  <link rel="manifest" href="manifest.json" />
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png" />
  <link rel="apple-touch-icon" href="icons/icon-512.png" />

  <!-- ğŸ¨ Styles -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- â˜€ï¸ğŸŒ™ Theme Toggle -->
  <div id="theme-toggle">
    <button id="theme-icon" onclick="toggleTheme()">ğŸŒ™</button>
  </div>

  <!-- ğŸš€ Splash Screen -->
  <div id="splash-screen">
    <div style="font-size: 4em; margin-bottom: 0.2em;">ğŸ“š</div>
    <h1 style="font-size: 3em; margin: 0.2em 0;">Learn English</h1>
    <p style="font-size: 1.2em; opacity: 0.9;">Your journey to fluency starts here</p>
  </div>

  <!-- ğŸ‘‹ Welcome Screen -->
  <div id="welcome-screen" style="display:none;">
    <h2 style="margin-bottom: 0.3em;">Welcome to Learn English!</h2>
    <p style="font-size: 0.95em; margin-bottom: 0.8em;" class="welcome-subtitle">Master English with interactive lessons</p>

    <label for="username" style="font-size: 0.95em;">ğŸ‘¤ Enter your name:</label><br />
    <input type="text" id="username" placeholder="Your Name" style="margin-bottom: 0.6em;" /><br />

    <h3 style="margin: 0.6em 0 0.6em 0; font-size: 1.1em;">ğŸ¯ Select Your Level</h3>
    <div class="difficulty-buttons">
      <button onclick="startTest('easy')">ğŸŸ¢ Easy</button>
      <button onclick="startTest('medium')">ğŸŸ¡ Medium</button>
      <button onclick="startTest('advanced')">ğŸ”´ Advanced</button>
    </div>

    <div
      style="margin: 1.2em 0 0.8em 0; padding: 1em; background: rgba(102, 126, 234, 0.05); border-radius: 12px; border-left: 4px solid #667eea;">
      <h3 style="margin: 0 0 0.5em 0; font-size: 1em;">ğŸ“š Or Expand Your Vocabulary</h3>
      <p style="font-size: 0.85em; margin-bottom: 0.8em;" class="vocab-description">Learn new words with meanings and translations
      </p>
      <button onclick="loadVocabulary()" class="vocab-btn" style="padding: 0.7em 1.8em; font-size: 1em;">ğŸ“˜ Start
        Vocabulary</button>
    </div>

    <div
      style="margin-top: 0.6em; padding: 0.6em; background: rgba(255, 193, 7, 0.1); border-radius: 10px; border: 1px solid rgba(255, 193, 7, 0.3);">
      <p style="font-size: 0.75em; margin: 0;" class="audio-tip-text">
        ğŸ”Š Click speaker buttons to replay audio anytime
      </p>
    </div>
  </div>

  <!-- ğŸ“– Usage Modal -->
  <div id="usage-modal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1000; justify-content: center; align-items: center;">
    <div id="usage-modal-content" style="border-radius: 20px; padding: 2em; max-width: 500px; width: 90%; max-height: 80vh; overflow-y: auto; position: relative;">
      <button onclick="closeUsageModal()" style="position: absolute; top: 15px; right: 15px; background: #ff6b6b; color: white; border: none; border-radius: 50%; width: 35px; height: 35px; font-size: 1.2em; cursor: pointer; font-weight: bold;">Ã—</button>
      <div id="usage-content"></div>
    </div>
  </div>

  <!-- âš ï¸ Confirmation Modal -->
  <div id="confirm-modal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1001; justify-content: center; align-items: center;">
    <div class="modal-content" style="background: linear-gradient(135deg, #e8eaff 0%, #f0f2ff 100%); border-radius: 20px; padding: 2em; max-width: 450px; width: 90%; box-shadow: 0 10px 40px rgba(0,0,0,0.3); text-align: center; border: 1px solid rgba(102, 126, 234, 0.2);">
      <div style="font-size: 3em; margin-bottom: 0.3em;">âš ï¸</div>
      <h2 id="confirm-title" style="margin: 0.3em 0; color: #667eea;">Confirm Action</h2>
      <p id="confirm-message" style="font-size: 1em; line-height: 1.6; margin: 1em 0; color: #333;"></p>
      <div style="display: flex; gap: 1em; justify-content: center; margin-top: 1.5em;">
        <button id="confirm-yes-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 0.8em 2em; border-radius: 50px; font-weight: 600; cursor: pointer; font-size: 1em; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">Yes, Continue</button>
        <button id="confirm-no-btn" style="background: white; color: #ff6b6b; border: 2px solid #ff6b6b; padding: 0.8em 2em; border-radius: 50px; font-weight: 600; cursor: pointer; font-size: 1em;">Cancel</button>
      </div>
    </div>
  </div>

  <!-- â„¹ï¸ Alert Modal -->
  <div id="alert-modal" style="display:none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1001; justify-content: center; align-items: center;">
    <div class="modal-content" style="background: linear-gradient(135deg, #e8eaff 0%, #f0f2ff 100%); border-radius: 20px; padding: 2em; max-width: 450px; width: 90%; box-shadow: 0 10px 40px rgba(0,0,0,0.3); text-align: center; border: 1px solid rgba(102, 126, 234, 0.2);">
      <div id="alert-icon-container" style="width: 80px; height: 80px; margin: 0 auto 1em auto; border-radius: 50%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
        <div id="alert-icon" style="font-size: 2.5em; color: white;"></div>
      </div>
      <h2 id="alert-title" style="margin: 0.3em 0; color: #667eea;">Notice</h2>
      <p id="alert-message" style="font-size: 1em; line-height: 1.6; margin: 1em 0; color: #1a1a1a; font-weight: 500; white-space: pre-line;"></p>
      <div style="display: flex; justify-content: center; margin-top: 1.5em;">
        <button id="alert-ok-btn" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 0.8em 2.5em; border-radius: 50px; font-weight: 600; cursor: pointer; font-size: 1em; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);">OK</button>
      </div>
    </div>
  </div>

  <!-- ğŸ§  Phrase Screen -->
  <div id="phrase-screen" style="display:none;">
    <div id="loader" class="spinner" style="display:none;"></div>

    <div id="hinglish-phrase" aria-live="polite">...</div>
    <div id="english-translation" aria-live="polite"></div>

    <!-- ğŸ“Š Progress Text + Bar -->
    <div id="progress-container">
      <div id="progress-text">Progress: 0 / 0</div>
      <div id="progress-bar"></div>
    </div>

    <div class="controls">
      <button onclick="revealTranslation()">Reveal</button>
      <button onclick="nextPhrase()">Next</button>
      <button onclick="exitApp()">Exit</button>
    </div>
  </div>

  <!-- ğŸ‰ Celebration Screen -->
  <div id="celebration"
    style="display:none; flex-direction:column; align-items:center; justify-content:center; text-align:center;">
    <div style="font-size: 5em; margin-bottom: 0.3em;">ğŸ‰</div>
    <h2>Amazing Work, <span id="user-name"></span>!</h2>
    <p class="celebration-sub" style="font-size: 1.2em; margin-top: 0.5em;">You're making incredible progress!</p>
    <audio id="cheer-sound" src="sounds/APPLAUSE.WAV" preload="auto"></audio>

    <p id="level-status">Youâ€™ve completed all phrases!</p>

    <div class="controls">
      <button id="move-on-btn" onclick="moveToNextFile()" style="display:none;">â¡ï¸ Continue Learning</button>
      <button onclick="exitApp()">ğŸ  Back to Home</button>
    </div>
  </div>

  <!-- ğŸ§  App Logic -->
  <script src="app.js?v=11"></script>

  <!-- âš™ï¸ Register Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker
          .register('service-worker.js')
          .then(() => console.log('Service Worker registered âœ…'))
          .catch(err => console.warn('SW registration failed:', err));
      });
    }
  </script>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</body>

</html>